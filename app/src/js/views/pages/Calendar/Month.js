// Generated by CoffeeScript 1.6.2
define(['views/pages/PageBase', 'collections/Months', 'ovivo'], function(PageBase, Months) {
  return PageBase.extend({
    el: '.page.page-calendar .month-view',
    name: 'month',
    events: {},
    prev: function() {
      this.current.setMonth(this.current.getMonth() - 1);
      return this.navigateMonth(this.current.getFullYear(), this.current.getMonth());
    },
    next: function() {
      this.current.setMonth(this.current.getMonth() + 1);
      return this.navigateMonth(this.current.getFullYear(), this.current.getMonth());
    },
    navigateMonth: function(year, month) {
      var _month;

      if ((_month = this.months.get("" + year + "-" + month)) == null) {
        _month = this.months.addMonth({
          month: month,
          year: year
        });
      }
      this.months.show(_month);
      return true;
    },
    processMonthAdd: function(month, months) {
      return this.$('.months-list').append(month.view.el);
    },
    processMonthShow: function(month) {
      this.title.html(ovivo.config.MONTHS[month.month()] + ' ' + month.year());
      return console.log('Show ' + ovivo.config.MONTHS[month.month()] + ' ' + month.year());
    },
    processMonthHide: function(month) {},
    initialize: function() {
      var _now;

      this.current = _now = new Date();
      this.title = $('.page.page-calendar header span.title');
      ovivo.desktop.months = this.months = new Months();
      this.months.on('add', this.processMonthAdd, this);
      this.months.on('show', this.processMonthShow, this);
      this.months.on('hide', this.processMonthHide, this);
      this.navigateMonth(_now.getFullYear(), _now.getMonth());
      return true;
    }
  });
});
